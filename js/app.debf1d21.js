(function(){"use strict";var t={2405:function(t,e,n){var o=n(9242),r=n(3396),a=n(7139);const i=(0,r._)("h1",null,"Список городов",-1),s={class:"table"},l=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"Город"),(0,r._)("th",{scope:"col"},"Количество жителей"),(0,r._)("th",{scope:"col"},"Количество автомобилей")])],-1);function d(t,e,n,o,d,c){const u=(0,r.up)("AddCityModal"),h=(0,r.up)("CityCharts");return(0,r.wg)(),(0,r.iD)("div",null,[c.showModal?((0,r.wg)(),(0,r.j4)(u,{key:0})):(0,r.kq)("",!0),i,(0,r._)("table",s,[l,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.cities,((t,e)=>((0,r.wg)(),(0,r.iD)("tr",{key:e},[(0,r._)("td",null,(0,a.zw)(t.name),1),(0,r._)("td",null,(0,a.zw)(t.population),1),(0,r._)("td",null,(0,a.zw)(t.cars),1)])))),128))])]),(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>c.changeShowModal&&c.changeShowModal(...t)),class:"btn btn-primary"}," Добавить город "),(0,r.Wm)(h)])}const c={class:"modal-dialog"},u={class:"modal-content"},h={class:"modal-header"},p=(0,r._)("h5",{class:"modal-title"},"Добавить город",-1),m=(0,r._)("span",{"aria-hidden":"true"},"×",-1),f=[m],y={class:"modal-body"},b={class:"form-group"},w=(0,r._)("label",{for:"cityName"},"Город:",-1),C={class:"form-group"},g=(0,r._)("label",{for:"population"},"Количество жителей:",-1),v={class:"form-group"},_=(0,r._)("label",{for:"cars"},"Количество автомобилей:",-1),M=(0,r._)("button",{type:"submit",class:"btn btn-primary"},"Сохранить",-1);function S(t,e,n,i,s,l){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",{class:(0,a.C_)(["modal",{show:n.showModal}]),style:{display:"block",background:"rgba(0, 0, 0, 0.5)"}},[(0,r._)("div",c,[(0,r._)("div",u,[(0,r._)("div",h,[p,(0,r._)("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>l.changeShowModal&&l.changeShowModal(...t))},f)]),(0,r._)("div",y,[(0,r._)("form",{onSubmit:e[4]||(e[4]=(...t)=>l.addCity&&l.addCity(...t))},[(0,r._)("div",b,[w,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>s.newCity.name=t),id:"cityName",required:""},null,512),[[o.nr,s.newCity.name]])]),(0,r._)("div",C,[g,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>s.newCity.population=t),id:"population",required:""},null,512),[[o.nr,s.newCity.population]])]),(0,r._)("div",v,[_,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=t=>s.newCity.cars=t),id:"cars",required:""},null,512),[[o.nr,s.newCity.cars]])]),M],32)])])])],2)])}var k={props:{showModal:Boolean,renderPieChart:Function,renderBarChart:Function},data(){return{newCity:{name:"",population:0,cars:0}}},methods:{addCity(t){t.preventDefault(),this.$store.commit("addCity",this.newCity),this.changeShowModal()},changeShowModal(){this.$store.commit("changeShowModal")}}},O=n(89);const j=(0,O.Z)(k,[["render",S]]);var P=j;const $={class:"d-flex"},x=["id"],I=["id"];function B(t,e,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",$,[(0,r._)("canvas",{id:a.pieChartId,class:"chart"},null,8,x),(0,r._)("canvas",{id:a.barChartId,class:"chart"},null,8,I)])}var Z=n(1632),D={data(){return{pieChart:null,barChart:null,pieChartId:"pieChart"+Math.random().toString(36).substring(7),barChartId:"barChart"+Math.random().toString(36).substring(7)}},computed:{cities(){return this.$store.state.cities},showModal(){return this.$store.state.showModal}},watch:{showModal:{handler(){this.$nextTick((()=>{this.renderPieChart(),this.renderBarChart()}))},immediate:!0}},mounted(){this.$store.dispatch("fetchCities").then((()=>{this.renderPieChart(),this.renderBarChart()}))},methods:{renderPieChart(){const t=document.getElementById(this.pieChartId);if(this.destroyChart(this.pieChart),t){const e={labels:this.cities.map((t=>t.name)),datasets:[{data:this.cities.map((t=>t.population)),backgroundColor:["red","blue","green","orange","purple","pink","brown","yellow"]}]};this.pieChart=new Z.ZP(t,{type:"pie",data:e})}},renderBarChart(){const t=document.getElementById(this.barChartId);if(this.destroyChart(this.barChart),t){const e={labels:this.cities.map((t=>t.name)),datasets:[{label:"Соотношение автомобили/жители",data:this.cities.map((t=>t.cars/t.population)),backgroundColor:"blue"}]};this.barChart=new Z.ZP(t,{type:"bar",data:e,options:{scales:{y:{beginAtZero:!0}}}})}},destroyChart(t){t&&t.destroy()}}};const T=(0,O.Z)(D,[["render",B]]);var q=T,z={components:{AddCityModal:P,CityCharts:q},computed:{cities(){return this.$store.state.cities},showModal(){return this.$store.state.showModal}},methods:{changeShowModal(){this.$store.commit("changeShowModal")}}};const A=(0,O.Z)(z,[["render",d]]);var E=A,F=(n(7658),n(4161)),U=n(65),V=(0,U.MT)({state:{cities:[],showModal:!1},mutations:{setCities(t,e){t.cities=e},changeShowModal(t){t.showModal=!t.showModal},addCity(t,e){t.cities.push(e)}},actions:{async fetchCities({commit:t}){try{const e=await F.Z.get("./data.json"),n=e.data.cities;t("setCities",n)}catch(e){console.error("Ошибка при загрузке данных о городах:",e)}}},getters:{}});n(5654);(0,o.ri)(E).use(V).mount("#app")}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={exports:{}};return t[o].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,o,r,a){if(!o){var i=1/0;for(c=0;c<t.length;c++){o=t[c][0],r=t[c][1],a=t[c][2];for(var s=!0,l=0;l<o.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](o[l])}))?o.splice(l--,1):(s=!1,a<i&&(i=a));if(s){t.splice(c--,1);var d=r();void 0!==d&&(e=d)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[o,r,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,a,i=o[0],s=o[1],l=o[2],d=0;if(i.some((function(e){return 0!==t[e]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)var c=l(n)}for(e&&e(o);d<i.length;d++)a=i[d],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(c)},o=self["webpackChunksmartpoint_test"]=self["webpackChunksmartpoint_test"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(2405)}));o=n.O(o)})();
//# sourceMappingURL=app.debf1d21.js.map